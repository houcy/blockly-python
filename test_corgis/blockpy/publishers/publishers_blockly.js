

var publishers_INDEXES = [
    ["(None)", "(None)"],
    
    ["genre", "genre"] ,
    ["type", "type"] ,
    ["name", "name"] 
];

var publishers_INDEX_VALUES = {
    "(None)": [],
    
    "genre": [
        
        ["children", "children"] ,
        ["comics", "comics"] ,
        ["fiction", "fiction"] ,
        ["foreign language", "foreign language"] ,
        ["genre fiction", "genre fiction"] ,
        ["nonfiction", "nonfiction"] 
    ],
    "type": [
        
        ["amazon", "amazon"] ,
        ["big five", "big five"] ,
        ["indie", "indie"] ,
        ["single author", "single author"] ,
        ["small/medium", "small/medium"] 
    ],
    "name": [
        
        ["(Indie Publisher)", "(Indie Publisher)"] ,
        ["(Single-Author Publisher)", "(Single-Author Publisher)"] ,
        ["(Small or Medium Publisher)", "(Small or Medium Publisher)"] ,
        ["47North", "47North"] ,
        ["Ace", "Ace"] ,
        ["Aerie", "Aerie"] ,
        ["Aladdin", "Aladdin"] ,
        ["Alfred A. Knopf BFYR", "Alfred A. Knopf BFYR"] ,
        ["Alpha", "Alpha"] ,
        ["Amazon Publishing", "Amazon Publishing"] ,
        ["AmazonCrossing", "AmazonCrossing"] ,
        ["AmazonEncore", "AmazonEncore"] ,
        ["Amistad", "Amistad"] ,
        ["Amphoto Books", "Amphoto Books"] ,
        ["Anchor", "Anchor"] ,
        ["Anthony Bourdain/Ecco", "Anthony Bourdain/Ecco"] ,
        ["Appetite by Random House", "Appetite by Random House"] ,
        ["Atheneum Books for Young Readers", "Atheneum Books for Young Readers"] ,
        ["Atria / 37 Ink", "Atria / 37 Ink"] ,
        ["Atria Books", "Atria Books"] ,
        ["Atria Books/Beyond Words", "Atria Books/Beyond Words"] ,
        ["Atria Books/Marble Arch Press", "Atria Books/Marble Arch Press"] ,
        ["Atria/Emily Bestler Books", "Atria/Emily Bestler Books"] ,
        ["Avery", "Avery"] ,
        ["Avon", "Avon"] ,
        ["Avon Impulse", "Avon Impulse"] ,
        ["Avon Inspire", "Avon Inspire"] ,
        ["Avon Red Impulse", "Avon Red Impulse"] ,
        ["Back Bay Books", "Back Bay Books"] ,
        ["Ballantine Books", "Ballantine Books"] ,
        ["Balzer + Bray", "Balzer + Bray"] ,
        ["Bantam", "Bantam"] ,
        ["Bantam Classics", "Bantam Classics"] ,
        ["Bantam Dell", "Bantam Dell"] ,
        ["Berkley", "Berkley"] ,
        ["Billboard Books", "Billboard Books"] ,
        ["Blue Rider Press", "Blue Rider Press"] ,
        ["BradyGames", "BradyGames"] ,
        ["Broadside e-books", "Broadside e-books"] ,
        ["Broadway Books", "Broadway Books"] ,
        ["Business Plus", "Business Plus"] ,
        ["Cash Money Content", "Cash Money Content"] ,
        ["Celebra", "Celebra"] ,
        ["Celestial Arts", "Celestial Arts"] ,
        ["Center Street", "Center Street"] ,
        ["Chicken Soup for the Soul", "Chicken Soup for the Soul"] ,
        ["Clarkson Potter", "Clarkson Potter"] ,
        ["CLBusiness", "CLBusiness"] ,
        ["Collins", "Collins"] ,
        ["Collins Reference", "Collins Reference"] ,
        ["Convergent Books", "Convergent Books"] ,
        ["Crimeline", "Crimeline"] ,
        ["Crossing Press", "Crossing Press"] ,
        ["Crown", "Crown"] ,
        ["Crown Archetype", "Crown Archetype"] ,
        ["Crown Business", "Crown Business"] ,
        ["Crown Forum", "Crown Forum"] ,
        ["Current", "Current"] ,
        ["David Fickling Books", "David Fickling Books"] ,
        ["DAW", "DAW"] ,
        ["Debbie Macomber Books", "Debbie Macomber Books"] ,
        ["Deepak Chopra", "Deepak Chopra"] ,
        ["Del Rey", "Del Rey"] ,
        ["Delacorte Books for Young Readers", "Delacorte Books for Young Readers"] ,
        ["Delacorte Press", "Delacorte Press"] ,
        ["Dell", "Dell"] ,
        ["Delta", "Delta"] ,
        ["Dial", "Dial"] ,
        ["Dial Press Trade Paperback", "Dial Press Trade Paperback"] ,
        ["DK Publishing", "DK Publishing"] ,
        ["Doubleday", "Doubleday"] ,
        ["Dragonfly Books", "Dragonfly Books"] ,
        ["Dutton Adult", "Dutton Adult"] ,
        ["Dutton Children's", "Dutton Children's"] ,
        ["Ecco", "Ecco"] ,
        ["Entangled: Bliss", "Entangled: Bliss"] ,
        ["Entangled: Brazen", "Entangled: Brazen"] ,
        ["Entangled: Indulgence", "Entangled: Indulgence"] ,
        ["Entangled: Select", "Entangled: Select"] ,
        ["Entangled: Teen", "Entangled: Teen"] ,
        ["ESPN", "ESPN"] ,
        ["Faber & Faber", "Faber & Faber"] ,
        ["FaithWords", "FaithWords"] ,
        ["Farrar, Straus and Giroux", "Farrar, Straus and Giroux"] ,
        ["Fawcett", "Fawcett"] ,
        ["Feiwel & Friends", "Feiwel & Friends"] ,
        ["FENN-M&S", "FENN-M&S"] ,
        ["First Second", "First Second"] ,
        ["Flash Point", "Flash Point"] ,
        ["Fodor's", "Fodor's"] ,
        ["Forever", "Forever"] ,
        ["Forever Yours", "Forever Yours"] ,
        ["Forge Books", "Forge Books"] ,
        ["Free Press", "Free Press"] ,
        ["FSG Originals", "FSG Originals"] ,
        ["Gallery Books", "Gallery Books"] ,
        ["Gallery Books/Karen Hunter Publishing", "Gallery Books/Karen Hunter Publishing"] ,
        ["Galvanized Books", "Galvanized Books"] ,
        ["Gildan Digital", "Gildan Digital"] ,
        ["Golden Books", "Golden Books"] ,
        ["Golden Guides from St. Martin's Press", "Golden Guides from St. Martin's Press"] ,
        ["Golden/Disney", "Golden/Disney"] ,
        ["Gotham Books", "Gotham Books"] ,
        ["Grand Central Life & Style", "Grand Central Life & Style"] ,
        ["Grand Central Publishing", "Grand Central Publishing"] ,
        ["Grand Harbor Press", "Grand Harbor Press"] ,
        ["Graywolf Press", "Graywolf Press"] ,
        ["Greenwillow Books", "Greenwillow Books"] ,
        ["Grijalbo", "Grijalbo"] ,
        ["Grosset & Dunlap", "Grosset & Dunlap"] ,
        ["Grupo Nelson", "Grupo Nelson"] ,
        ["Harmony", "Harmony"] ,
        ["Harper", "Harper"] ,
        ["Harper Design", "Harper Design"] ,
        ["Harper Element", "Harper Element"] ,
        ["Harper Paperbacks", "Harper Paperbacks"] ,
        ["Harper Perennial", "Harper Perennial"] ,
        ["Harper Thorsons", "Harper Thorsons"] ,
        ["Harper Voyager", "Harper Voyager"] ,
        ["HarperBusiness", "HarperBusiness"] ,
        ["HarperCollins", "HarperCollins"] ,
        ["HarperCollins e-books", "HarperCollins e-books"] ,
        ["HarperCollinsChildren'sBooks", "HarperCollinsChildren'sBooks"] ,
        ["HarperFestival", "HarperFestival"] ,
        ["HarperOne", "HarperOne"] ,
        ["HarperPerennial Classics", "HarperPerennial Classics"] ,
        ["HarperPress", "HarperPress"] ,
        ["HarperSport", "HarperSport"] ,
        ["HarperStudio", "HarperStudio"] ,
        ["HarperTeen", "HarperTeen"] ,
        ["HarperTorch", "HarperTorch"] ,
        ["HarperTrue", "HarperTrue"] ,
        ["HarperWave", "HarperWave"] ,
        ["Henry Holt and Co.", "Henry Holt and Co."] ,
        ["Hill and Wang", "Hill and Wang"] ,
        ["Hodder & Stoughton", "Hodder & Stoughton"] ,
        ["Hogarth", "Hogarth"] ,
        ["Holt Paperbacks", "Holt Paperbacks"] ,
        ["Howard Books", "Howard Books"] ,
        ["HP", "HP"] ,
        ["Hudson Street Press", "Hudson Street Press"] ,
        ["Hyperion", "Hyperion"] ,
        ["Image", "Image"] ,
        ["InterMix", "InterMix"] ,
        ["Island Books", "Island Books"] ,
        ["It Books", "It Books"] ,
        ["Ivy Books", "Ivy Books"] ,
        ["Jericho Books", "Jericho Books"] ,
        ["Jet City Comics", "Jet City Comics"] ,
        ["Joe Books", "Joe Books"] ,
        ["Jove", "Jove"] ,
        ["Katherine Tegen Books", "Katherine Tegen Books"] ,
        ["Kathy Dawson Books", "Kathy Dawson Books"] ,
        ["Knopf", "Knopf"] ,
        ["Knopf Books for Young Readers", "Knopf Books for Young Readers"] ,
        ["Knopf Group E-Books", "Knopf Group E-Books"] ,
        ["Laurel Leaf", "Laurel Leaf"] ,
        ["LB Kids", "LB Kids"] ,
        ["Leer-e", "Leer-e"] ,
        ["Little A", "Little A"] ,
        ["Little Simon", "Little Simon"] ,
        ["Little, Brown and Company", "Little, Brown and Company"] ,
        ["Little, Brown Books for Young Readers", "Little, Brown Books for Young Readers"] ,
        ["Lone Eagle", "Lone Eagle"] ,
        ["Loveswept", "Loveswept"] ,
        ["LucasBooks", "LucasBooks"] ,
        ["Main Street Books", "Main Street Books"] ,
        ["Margaret K. McElderry Books", "Margaret K. McElderry Books"] ,
        ["McClelland & Stewart", "McClelland & Stewart"] ,
        ["Meadowbrook", "Meadowbrook"] ,
        ["Metropolitan Books", "Metropolitan Books"] ,
        ["Minotaur Books", "Minotaur Books"] ,
        ["Mitchell Beazley", "Mitchell Beazley"] ,
        ["Modern Library", "Modern Library"] ,
        ["Montlake Romance", "Montlake Romance"] ,
        ["MTV Books", "MTV Books"] ,
        ["Mulholland Books", "Mulholland Books"] ,
        ["Multnomah Books", "Multnomah Books"] ,
        ["NAL", "NAL"] ,
        ["Nan A. Talese", "Nan A. Talese"] ,
        ["Newmarket for It Books", "Newmarket for It Books"] ,
        ["Newmarket Press", "Newmarket Press"] ,
        ["North Point Press", "North Point Press"] ,
        ["Onyx", "Onyx"] ,
        ["Orb Books", "Orb Books"] ,
        ["Orbit", "Orbit"] ,
        ["Orion", "Orion"] ,
        ["Overlook", "Overlook"] ,
        ["Page Street Publishing", "Page Street Publishing"] ,
        ["Palgrave Macmillan", "Palgrave Macmillan"] ,
        ["Pantheon", "Pantheon"] ,
        ["Papercutz", "Papercutz"] ,
        ["Penguin", "Penguin"] ,
        ["Penguin Books", "Penguin Books"] ,
        ["Penguin Classic", "Penguin Classic"] ,
        ["Penguin Young Readers", "Penguin Young Readers"] ,
        ["Perigee", "Perigee"] ,
        ["Peterson Institute for International Economics", "Peterson Institute for International Economics"] ,
        ["Peterson's", "Peterson's"] ,
        ["PHILOMEL", "PHILOMEL"] ,
        ["Philomel", "Philomel"] ,
        ["Piatkus", "Piatkus"] ,
        ["Picador", "Picador"] ,
        ["Pintail", "Pintail"] ,
        ["Plume", "Plume"] ,
        ["Pocket Books", "Pocket Books"] ,
        ["Pocket Books/Star Trek", "Pocket Books/Star Trek"] ,
        ["Pocket Star", "Pocket Star"] ,
        ["Poppy", "Poppy"] ,
        ["Portfolio", "Portfolio"] ,
        ["Potter Craft", "Potter Craft"] ,
        ["Potter Style", "Potter Style"] ,
        ["Prentice Hall Press", "Prentice Hall Press"] ,
        ["Presidio Press", "Presidio Press"] ,
        ["Princeton Review", "Princeton Review"] ,
        ["PSS Juvenile", "PSS Juvenile"] ,
        ["Puffin", "Puffin"] ,
        ["Putnam Adult", "Putnam Adult"] ,
        ["Putnam Juvenile", "Putnam Juvenile"] ,
        ["Random House", "Random House"] ,
        ["Random House Books for Young Readers", "Random House Books for Young Readers"] ,
        ["Random House Canada", "Random House Canada"] ,
        ["Random House Reference", "Random House Reference"] ,
        ["Random House Trade Paperbacks", "Random House Trade Paperbacks"] ,
        ["Random House/Disney", "Random House/Disney"] ,
        ["Razorbill", "Razorbill"] ,
        ["Reader's Digest", "Reader's Digest"] ,
        ["Reagan Arthur Books", "Reagan Arthur Books"] ,
        ["Renaissance Books", "Renaissance Books"] ,
        ["RH/Disney", "RH/Disney"] ,
        ["Ripley Publishing", "Ripley Publishing"] ,
        ["Riverhead", "Riverhead"] ,
        ["Roaring Brook Press", "Roaring Brook Press"] ,
        ["Robin Corey Books", "Robin Corey Books"] ,
        ["Roc", "Roc"] ,
        ["Rough Guides", "Rough Guides"] ,
        ["Sarah Crichton Books", "Sarah Crichton Books"] ,
        ["Schocken", "Schocken"] ,
        ["Schwartz & Wade", "Schwartz & Wade"] ,
        ["Scientific American", "Scientific American"] ,
        ["Scientific American / Farrar, Straus and Giroux", "Scientific American / Farrar, Straus and Giroux"] ,
        ["Scribner", "Scribner"] ,
        ["Sentinel", "Sentinel"] ,
        ["Signet", "Signet"] ,
        ["Signet Classic", "Signet Classic"] ,
        ["Simon & Schuster", "Simon & Schuster"] ,
        ["Simon & Schuster Audio", "Simon & Schuster Audio"] ,
        ["Simon & Schuster Books for Young Readers", "Simon & Schuster Books for Young Readers"] ,
        ["Simon & Schuster/Paula Wiseman Books", "Simon & Schuster/Paula Wiseman Books"] ,
        ["Simon Pulse", "Simon Pulse"] ,
        ["Simon Pulse/Mercury Ink", "Simon Pulse/Mercury Ink"] ,
        ["Simon Spotlight", "Simon Spotlight"] ,
        ["Skyscape", "Skyscape"] ,
        ["Speak", "Speak"] ,
        ["Spectra", "Spectra"] ,
        ["Spiegel & Grau", "Spiegel & Grau"] ,
        ["Square Fish", "Square Fish"] ,
        ["St. Martin's Griffin", "St. Martin's Griffin"] ,
        ["St. Martin's Paperbacks", "St. Martin's Paperbacks"] ,
        ["St. Martin's Press", "St. Martin's Press"] ,
        ["St. Martin's True Crime", "St. Martin's True Crime"] ,
        ["Starscape", "Starscape"] ,
        ["Studio", "Studio"] ,
        ["Tarcher", "Tarcher"] ,
        ["Ten Speed Press", "Ten Speed Press"] ,
        ["The Dial Press", "The Dial Press"] ,
        ["The Friday Project", "The Friday Project"] ,
        ["The Penguin Press", "The Penguin Press"] ,
        ["Thomas & Mercer", "Thomas & Mercer"] ,
        ["Thomas Dunne Books", "Thomas Dunne Books"] ,
        ["Thomas Nelson", "Thomas Nelson"] ,
        ["Thorsons", "Thorsons"] ,
        ["Three Rivers Press", "Three Rivers Press"] ,
        ["Threshold Editions", "Threshold Editions"] ,
        ["Times Books", "Times Books"] ,
        ["Tor Books", "Tor Books"] ,
        ["Tor Science Fiction", "Tor Science Fiction"] ,
        ["Tor Teen", "Tor Teen"] ,
        ["Tor/Seven Seas", "Tor/Seven Seas"] ,
        ["Touchstone", "Touchstone"] ,
        ["Truman Talley Books", "Truman Talley Books"] ,
        ["Tundra Books", "Tundra Books"] ,
        ["Twelve", "Twelve"] ,
        ["Two Lions", "Two Lions"] ,
        ["Viking Adult", "Viking Adult"] ,
        ["Viking Children's", "Viking Children's"] ,
        ["Villard", "Villard"] ,
        ["Vintage", "Vintage"] ,
        ["Vintage Espanol", "Vintage Espanol"] ,
        ["Vision", "Vision"] ,
        ["Walden Pond Press", "Walden Pond Press"] ,
        ["Washington Square Press", "Washington Square Press"] ,
        ["WaterBrook Press", "WaterBrook Press"] ,
        ["Watson-Guptill", "Watson-Guptill"] ,
        ["Wellspring/Ballantine", "Wellspring/Ballantine"] ,
        ["Wendy Lamb Books", "Wendy Lamb Books"] ,
        ["William Morrow", "William Morrow"] ,
        ["William Morrow Cookbooks", "William Morrow Cookbooks"] ,
        ["William Morrow Impulse", "William Morrow Impulse"] ,
        ["William Morrow Paperbacks", "William Morrow Paperbacks"] ,
        ["Windblown Media", "Windblown Media"] ,
        ["Witness Impulse", "Witness Impulse"] ,
        ["World Wrestling Entertainment", "World Wrestling Entertainment"] ,
        ["Yearling", "Yearling"] ,
        ["Yen Press", "Yen Press"] ,
        ["Zinc Ink", "Zinc Ink"] ,
        ["Zonderkidz", "Zonderkidz"] ,
        ["Zondervan", "Zondervan"] ,
        ["Zondervan/Youth Specialties", "Zondervan/Youth Specialties"] 
    ]
}

var publishers_PROPERTIES = [
    ["amazon revenue", "amazon revenue"] ,
    ["author revenue", "author revenue"] ,
    ["gross sales", "gross sales"] ,
    ["publisher revenue", "publisher revenue"] ,
    ["units sold", "units sold"] ,
    ["genre", "genre"] ,
    ["name", "name"] ,
    ["type", "type"] ,
    ["sold by", "sold by"] ,
    ["average rating", "average rating"] ,
    ["sale price", "sale price"] ,
    ["sales rank", "sales rank"] ,
    ["total reviews", "total reviews"] 
]

Blockly.Blocks['publishers_get'] = {
  init: function() {
    this.setColour(WEATHER_HUE);
    this.appendDummyInput('MAIN')
        .appendField("publishers.get")
        .appendField(new Blockly.FieldDropdown(publishers_PROPERTIES), "PROPERTY");
    this.appendDummyInput('SECOND')
        .appendField("filter")
        .appendField(new Blockly.FieldDropdown(publishers_INDEXES, function(option) {
                        this.sourceBlock_.updateShape_(option);
                    }), "INDEX")
    this.updateShape_("(None)");
    this.setInputsInline(false);
    this.setOutput(true, "Array");
    this.setTooltip('Returns a list of Publishers data.');
  },
  mutationToDom: function() {
    var container = document.createElement('mutation');
    container.setAttribute('index', this.getFieldValue('INDEX'));
    container.setAttribute('index_value', this.getFieldValue('INDEX_VALUE'));
    container.setAttribute('module', "publishers")
    return container;
  },
  domToMutation: function(xmlElement) {
    var index = xmlElement.getAttribute('index');
    var index_value = xmlElement.getAttribute('index_value');
    this.updateShape_(index, index_value);
  },
  updateShape_: function(index, index_value) {
    var inputGroup = this.getInput('SECOND')
    var fieldExists = this.getField('INDEX_VALUE');
    if (fieldExists) {
        inputGroup.removeField('INDEX_VALUE');
    }
    this.setFieldValue(index, 'INDEX');
    if (index != undefined && index != '(None)') {
        inputGroup.appendField(new Blockly.FieldDropdown(publishers_INDEX_VALUES[index]), 'INDEX_VALUE')
        if (index_value != undefined) {
            this.setFieldValue(index_value, 'INDEX_VALUE');
        } else {
            this.setFieldValue(publishers_INDEX_VALUES[index][0][0], 'INDEX_VALUE');
        }
    }    
  }
};
Blockly.Python['publishers_get'] = function(block) {
    Blockly.Python.definitions_['import_publishers'] = 'import publishers';
    var propertyValue = block.getFieldValue('PROPERTY') || '';
    var property = Blockly.Python.quote_(propertyValue);
    var index_unquoted = block.getFieldValue('INDEX');
    var index = Blockly.Python.quote_(index_unquoted || '');
    var index_value = "''";
    if (index_unquoted != '(None)') {
        var iv = block.getFieldValue('INDEX_VALUE') || "";
        index_value = Blockly.Python.quote_(iv);
    }
    var code = 'publishers.get('+property+',' +index+','+index_value+')';
    return [code, Blockly.Python.ORDER_ATOMIC];
};

PythonToBlocks.KNOWN_MODULES['publishers'] = {
    "get": ["publishers_get", 
            "PROPERTY", 
            {"type": "mutation", "name": "@INDEX"},
            {"type": "mutation", "name": "@INDEX_VALUE"}]
};

BlockPyEditor.CATEGORY_MAP['Data - Publishers'] = '<category name="Data - Publishers" colour="50">'+
                    '<block type="publishers_get"><mutation index="(None)" index_value=""></mutation></block>'+
                '</category>';